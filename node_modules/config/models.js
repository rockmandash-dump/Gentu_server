var mongoose = require('mongoose');

var Schema = mongoose.Schema;

var uri = 'mongodb://gentu_admin:1234@ds029824.mongolab.com:29824/gentu_server';

var userSchema = mongoose.Schema({ 
	token : String,
	email: String, 
	hashed_password: String, 
	salt : String,
	temp_str:String
});
var database;

// mongoose.connect('mongodb://gentu_admin:1234@ds029824.mongolab.com:29824/gentu_server');


mongoose.connect(uri, function(err, db) { //參數1 填入mongodb的位址 參數2 填寫事件監聽器
  if (err) {
    console.log('connect mongo db error ' + err);//如果err有回傳，表示出錯 使用console.log印出錯誤
  } else {
    console.log('connect mongo db success');
    database = db;//若是沒有出錯，表示連線成功 用變數database儲存db實體
  }
});

module.exports = mongoose.model('users', userSchema);        
